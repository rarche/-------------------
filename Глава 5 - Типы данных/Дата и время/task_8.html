<script>
    'use strict';
    
    function formatDate(date) {
        let now = new Date();
        let diff_seconds = Math.floor((now - date) / 1000)
        if (diff_seconds < 1) {
            return 'прямо сейчас'
        } else if (diff_seconds < 60) {
            return `${diff_seconds} сек. назад`
        } else if (diff_seconds < 3600) {
            return `${diff_seconds / 60} мин. назад`
        } return `${date.getDate()}.${date.getMonth()+1}.${date.getFullYear()}, ${date.getHours()}:${date.getMinutes()}`
    }
    
    
    alert( formatDate(new Date(new Date - 1)) ); // "прямо сейчас"
    
    alert( formatDate(new Date(new Date - 30 * 1000)) ); // "30 сек. назад"
    
    alert( formatDate(new Date(new Date - 5 * 60 * 1000)) ); // "5 мин. назад"
    
    // вчерашняя дата вроде 31.12.2016, 20:00
    alert( formatDate(new Date(new Date - 86400 * 1000)) );
    
    </script>